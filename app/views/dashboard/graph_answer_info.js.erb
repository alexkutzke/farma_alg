$("#box-answer-info").html("<%= escape_javascript(render(:partial => 'graph_answer_info', :locals => {:answer => @answer, :notice => @notice}))%>");
$("span.label").tooltip();

var availableTags = <%= raw @available_tags.to_json %>;

$( "#add_tag_field" ).autocomplete({
  source: availableTags
});

$("#add_tag_field").focus();

$(".remove_tag_link").click(function(){
  $.ajax({
    url: "/dashboard/graph_remove_tag",
    data: {
      id: $(this).data("id"),
      answer_id: $(this).data("answer-id")
    },
    type: "delete"    
  });
});

$(".accept_tag_link").click(function(){
  $.ajax({
    url: "/dashboard/graph_accept_tag",
    data: {
      id: $(this).data("id"),
      answer_id: $(this).data("answer-id")
    },
    type: "put"    
  });
});

$(".reject_tag_link").click(function(){
  $.ajax({
    url: "/dashboard/graph_reject_tag",
    data: {
      id: $(this).data("id"),
      answer_id: $(this).data("answer-id")
    },
    type: "put"    
  });
});

$("#close-answer-info").click(function(){
  $("#answer-info").height(0);
  $("#answer-info").hide(0);

  if(selectedNode)
  {
    paintNode(selectedNode);
    selectedNode = null;
  }
  if(selectedEdge)
  {
    paintEdge(selectedEdge);
    selectedNode = null;
  }
});

$("div.output").each(function(){
  diffUsingJS("output-"+$(this).data("id"),"Saída da resposta",$(this).data("output"),"Saída esperada",$(this).data("expected-output"));
});

resizeApp();
prettyPrint();